!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.swave=e():t.swave=e()}(window,function(){return function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=0)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(1);e.default=o.Swave},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(2),n=i(3),r=function(){function t(t){void 0===t&&(t={}),this.config=new o.default(t),this.loadConfig(),this.loadAudio()}return t.prototype.loadAudio=function(){this.audioCtx=new AudioContext,this.audioSource=this.audioCtx.createMediaElementSource(this.audio),this.gainNode=this.audioCtx.createGain(),this.analyserNode=this.audioCtx.createAnalyser(),this.setAudioNode(this.gainNode,null,this.analyserNode),this.setAudioNode(this.analyserNode,this.gainNode,null)},t.prototype.setAudioNode=function(t,e,i){e?e.connect(t):this.audioSource.connect(t),i?t.connect(i):t.connect(this.audioCtx.destination)},t.prototype.loadConfig=function(){this.audio=new Audio(this.config.audioUrl),this.audio.crossOrigin=this.config.crossOrigin,this.audio.controls=this.config.showControls,this.audio.autoplay=this.config.autoPlay},t.prototype.play=function(){this.audio.play()},t.prototype.stop=function(){this.audio.pause(),this.audio.currentTime=0},t.prototype.pause=function(){this.audio.pause()},t.prototype.setVolume=function(t){this.gainNode&&(t>1&&(t=1),t<.1&&(t=.1),this.gainNode.gain.value=t*t)},t.prototype.enableVisualization=function(t){t&&!this.visualizer&&(this.visualizer=new n.default(t,this.analyserNode))},t.prototype.disableVisualization=function(){this.visualizer&&(this.visualizer.destroyCanvas(),this.visualizer=null)},t.prototype.getDuration=function(){return this.audio?this.audio.duration:null},t.prototype.setCurrentTime=function(t){t<=this.audio.duration&&(this.audio.currentTime=t)},t.prototype.getCurrentTime=function(){return this.audio?this.audio.currentTime:null},t.prototype.changeAudio=function(t){t!==this.audio.currentSrc&&(this.audio.src=t)},t}();e.Swave=r,window.Swave=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){return function(t){for(var e in this.showControls=!1,this.autoPlay=!1,this.audioUrl="",this.crossOrigin="anonymous",t)for(var i in this)e===i&&(this[i]=t[e])}}();e.default=o},function(t,e,i){"use strict";var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,i){var o=t.call(this,e)||this;return o.analyserNode=i,o.animate(),o}return n(e,t),e.prototype.animate=function(){var t=this,e=this.canvas.clientWidth,i=this.canvas.clientHeight;this.analyserNode.fftSize=256;var o=this.analyserNode.frequencyBinCount,n=new Uint8Array(o);this.ctx.clearRect(0,0,e,i);!function r(){requestAnimationFrame(r);t.analyserNode.getByteFrequencyData(n),t.ctx.fillStyle="rgb(255, 255, 255)",t.ctx.fillRect(0,0,e,i);for(var a,u=e/o*2.5,s=0,c=0;c<o;c++)a=n[c],t.ctx.fillStyle="rgb("+(a+100)+",15,156)",t.ctx.fillRect(s,i-a/2,u,a/2),s+=u+1}()},e.prototype.removeVisualizations=function(){this.destroyCanvas()},e}(i(4).default);e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.hostElement=t,this.canvas=document.createElement("canvas"),t.appendChild(this.canvas),this.canvas.id="swave-canvas",this.canvas.width=t.clientWidth,this.canvas.height=t.clientHeight,this.ctx=this.canvas.getContext("2d")}return t.prototype.destroyCanvas=function(){this.hostElement.removeChild(this.canvas)},t}();e.default=o}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zd2F2ZS93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vc3dhdmUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc3dhdmUvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vc3dhdmUvLi9zcmMvc3dhdmUudHMiLCJ3ZWJwYWNrOi8vc3dhdmUvLi9zcmMvY29uZmlnLnRzIiwid2VicGFjazovL3N3YXZlLy4vc3JjL3Zpc3VhbGl6ZXIudHMiLCJ3ZWJwYWNrOi8vc3dhdmUvLi9zcmMvY2FudmFzLnRzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsIndpbmRvdyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJzd2F2ZV8xIiwiZGVmYXVsdCIsIlN3YXZlIiwiY29uZmlnXzEiLCJ2aXN1YWxpemVyXzEiLCJjb25maWciLCJ0aGlzIiwibG9hZENvbmZpZyIsImxvYWRBdWRpbyIsImF1ZGlvQ3R4IiwiQXVkaW9Db250ZXh0IiwiYXVkaW9Tb3VyY2UiLCJjcmVhdGVNZWRpYUVsZW1lbnRTb3VyY2UiLCJhdWRpbyIsImdhaW5Ob2RlIiwiY3JlYXRlR2FpbiIsImFuYWx5c2VyTm9kZSIsImNyZWF0ZUFuYWx5c2VyIiwic2V0QXVkaW9Ob2RlIiwibm9kZSIsInByZXZpb3VzTm9kZSIsIm5leHROb2RlIiwiY29ubmVjdCIsImRlc3RpbmF0aW9uIiwiQXVkaW8iLCJhdWRpb1VybCIsImNyb3NzT3JpZ2luIiwiY29udHJvbHMiLCJzaG93Q29udHJvbHMiLCJhdXRvcGxheSIsImF1dG9QbGF5IiwicGxheSIsInN0b3AiLCJwYXVzZSIsImN1cnJlbnRUaW1lIiwic2V0Vm9sdW1lIiwidm9sdW1lIiwiZ2FpbiIsImVuYWJsZVZpc3VhbGl6YXRpb24iLCJob3N0RWxlbWVudCIsInZpc3VhbGl6ZXIiLCJkaXNhYmxlVmlzdWFsaXphdGlvbiIsImRlc3Ryb3lDYW52YXMiLCJnZXREdXJhdGlvbiIsImR1cmF0aW9uIiwic2V0Q3VycmVudFRpbWUiLCJ0aW1lIiwiZ2V0Q3VycmVudFRpbWUiLCJjaGFuZ2VBdWRpbyIsImN1cnJlbnRTcmMiLCJzcmMiLCJDb25maWciLCJmcm9tT2JqIiwib3duUHJvcGVydHkiLCJWaXN1YWxpemVyIiwiX3N1cGVyIiwiX3RoaXMiLCJhbmltYXRlIiwiX19leHRlbmRzIiwiV0lEVEgiLCJjYW52YXMiLCJjbGllbnRXaWR0aCIsIkhFSUdIVCIsImNsaWVudEhlaWdodCIsImZmdFNpemUiLCJidWZmZXJMZW5ndGhBbHQiLCJmcmVxdWVuY3lCaW5Db3VudCIsImRhdGFBcnJheUFsdCIsIlVpbnQ4QXJyYXkiLCJjdHgiLCJjbGVhclJlY3QiLCJkcmF3IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZ2V0Qnl0ZUZyZXF1ZW5jeURhdGEiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImJhckhlaWdodCIsImJhcldpZHRoIiwieCIsInJlbW92ZVZpc3VhbGl6YXRpb25zIiwiQ2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJpZCIsIndpZHRoIiwiaGVpZ2h0IiwiZ2V0Q29udGV4dCIsInJlbW92ZUNoaWxkIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGlCQUFBQyxTQUFBLGlCQUFBQyxP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dkNhLEVBQUksRUFFQzlHLEVBQUksRUFBR0EsRUFBSWlHLEVBQWlCakcsSUFDakM0RyxFQUFZVCxFQUFhbkcsR0FFekJ3RixFQUFLYSxJQUFJSyxVQUFZLFFBQVVFLEVBQVksS0FBTyxXQUNsRHBCLEVBQUthLElBQUlNLFNBQVNHLEVBQUdoQixFQUFTYyxFQUFZLEVBQUdDLEVBQVVELEVBQVksR0FFbkVFLEdBQUtELEVBQVcsRUFHeEJOLElBR0dqQixFQUFBMUQsVUFBQW1GLHFCQUFQLFdBQ0l6RSxLQUFLb0MsaUJBRWJZLEVBekNBLENBRkF4RixFQUFBLEdBRXdDbUMsb0dDRnhDLElBQUErRSxFQUFBLFdBSUksU0FBQUEsRUFBcUJ6QyxHQUFBakMsS0FBQWlDLGNBQ2pCakMsS0FBS3NELE9BQVNxQixTQUFTQyxjQUFjLFVBQ3JDM0MsRUFBWTRDLFlBQVk3RSxLQUFLc0QsUUFDN0J0RCxLQUFLc0QsT0FBT3dCLEdBQUssZUFDakI5RSxLQUFLc0QsT0FBT3lCLE1BQVE5QyxFQUFZc0IsWUFDaEN2RCxLQUFLc0QsT0FBTzBCLE9BQVEvQyxFQUFZd0IsYUFDaEN6RCxLQUFLK0QsSUFBTS9ELEtBQUtzRCxPQUFPMkIsV0FBVyxNQU0xQyxPQUhXUCxFQUFBcEYsVUFBQThDLGNBQVAsV0FDSXBDLEtBQUtpQyxZQUFZaUQsWUFBWWxGLEtBQUtzRCxTQUUxQ29CLEVBaEJBIiwiZmlsZSI6InN3YXZlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wic3dhdmVcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wic3dhdmVcIl0gPSBmYWN0b3J5KCk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgeyBTd2F2ZSB9IGZyb20gJy4vc3dhdmUnO1xuZXhwb3J0IGRlZmF1bHQgU3dhdmU7IiwiaW1wb3J0IENvbmZpZyBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgVmlzdWFsaXplciBmcm9tICcuL3Zpc3VhbGl6ZXInO1xuXG5leHBvcnQgY2xhc3MgU3dhdmUge1xuXG4gICAgcHJpdmF0ZSBjb25maWc6IENvbmZpZztcbiAgICBwcml2YXRlIGF1ZGlvOiBIVE1MQXVkaW9FbGVtZW50O1xuICAgIHByaXZhdGUgYXVkaW9DdHg6IEF1ZGlvQ29udGV4dDtcbiAgICBwcml2YXRlIGF1ZGlvU291cmNlOiBNZWRpYUVsZW1lbnRBdWRpb1NvdXJjZU5vZGU7XG4gICAgcHJpdmF0ZSBnYWluTm9kZTogR2Fpbk5vZGU7XG4gICAgcHJpdmF0ZSBhbmFseXNlck5vZGU6IEFuYWx5c2VyTm9kZTtcbiAgICBwcml2YXRlIHZpc3VhbGl6ZXI6IFZpc3VhbGl6ZXI7XG5cbiAgICBjb25zdHJ1Y3RvciAoY29uZmlnID0ge30pIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSBuZXcgQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIHRoaXMubG9hZENvbmZpZygpO1xuICAgICAgICB0aGlzLmxvYWRBdWRpbygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgbG9hZEF1ZGlvICgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hdWRpb0N0eCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcbiAgICAgICAgdGhpcy5hdWRpb1NvdXJjZSA9IHRoaXMuYXVkaW9DdHguY3JlYXRlTWVkaWFFbGVtZW50U291cmNlKHRoaXMuYXVkaW8pXG4gICAgICAgIHRoaXMuZ2Fpbk5vZGUgPSB0aGlzLmF1ZGlvQ3R4LmNyZWF0ZUdhaW4oKTtcbiAgICAgICAgdGhpcy5hbmFseXNlck5vZGUgPSB0aGlzLmF1ZGlvQ3R4LmNyZWF0ZUFuYWx5c2VyKCk7XG4gICAgICAgIHRoaXMuc2V0QXVkaW9Ob2RlKHRoaXMuZ2Fpbk5vZGUsIG51bGwsIHRoaXMuYW5hbHlzZXJOb2RlKTtcbiAgICAgICAgdGhpcy5zZXRBdWRpb05vZGUodGhpcy5hbmFseXNlck5vZGUsIHRoaXMuZ2Fpbk5vZGUsIG51bGwpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0QXVkaW9Ob2RlIChub2RlOiBBbmFseXNlck5vZGUgfCBHYWluTm9kZSwgcHJldmlvdXNOb2RlPzogQW5hbHlzZXJOb2RlIHwgR2Fpbk5vZGUsIG5leHROb2RlPzogQW5hbHlzZXJOb2RlIHwgR2Fpbk5vZGUpOiB2b2lkIHtcbiAgICAgICAgaWYgKHByZXZpb3VzTm9kZSkge1xuICAgICAgICAgICAgcHJldmlvdXNOb2RlLmNvbm5lY3Qobm9kZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmF1ZGlvU291cmNlLmNvbm5lY3Qobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5leHROb2RlKSB7XG4gICAgICAgICAgICBub2RlLmNvbm5lY3QobmV4dE5vZGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbm9kZS5jb25uZWN0KHRoaXMuYXVkaW9DdHguZGVzdGluYXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBsb2FkQ29uZmlnICgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hdWRpbyA9IG5ldyBBdWRpbyh0aGlzLmNvbmZpZy5hdWRpb1VybCk7XG4gICAgICAgIHRoaXMuYXVkaW8uY3Jvc3NPcmlnaW4gPSB0aGlzLmNvbmZpZy5jcm9zc09yaWdpbjtcbiAgICAgICAgdGhpcy5hdWRpby5jb250cm9scyA9IHRoaXMuY29uZmlnLnNob3dDb250cm9scztcbiAgICAgICAgdGhpcy5hdWRpby5hdXRvcGxheSA9IHRoaXMuY29uZmlnLmF1dG9QbGF5O1xuICAgIH1cblxuICAgIHB1YmxpYyBwbGF5ICgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hdWRpby5wbGF5KCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0b3AgKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmF1ZGlvLnBhdXNlKCk7XG4gICAgICAgIHRoaXMuYXVkaW8uY3VycmVudFRpbWUgPSAwO1xuICAgIH1cblxuICAgIHB1YmxpYyBwYXVzZSAoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYXVkaW8ucGF1c2UoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0Vm9sdW1lICh2b2x1bWU6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5nYWluTm9kZSkge1xuICAgICAgICAgICAgaWYgKHZvbHVtZSA+IDEpIHtcbiAgICAgICAgICAgICAgICB2b2x1bWUgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZvbHVtZSA8IDAuMSkge1xuICAgICAgICAgICAgICAgIHZvbHVtZSA9IDAuMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZ2Fpbk5vZGUuZ2Fpbi52YWx1ZSA9IHZvbHVtZSAqIHZvbHVtZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBlbmFibGVWaXN1YWxpemF0aW9uIChob3N0RWxlbWVudDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgaWYgKGhvc3RFbGVtZW50ICYmICF0aGlzLnZpc3VhbGl6ZXIpIHtcbiAgICAgICAgICAgIHRoaXMudmlzdWFsaXplciA9IG5ldyBWaXN1YWxpemVyKGhvc3RFbGVtZW50LCB0aGlzLmFuYWx5c2VyTm9kZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZGlzYWJsZVZpc3VhbGl6YXRpb24gKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy52aXN1YWxpemVyKSB7XG4gICAgICAgICAgICB0aGlzLnZpc3VhbGl6ZXIuZGVzdHJveUNhbnZhcygpO1xuICAgICAgICAgICAgdGhpcy52aXN1YWxpemVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXREdXJhdGlvbiAoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXVkaW8gPyB0aGlzLmF1ZGlvLmR1cmF0aW9uIDogbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0Q3VycmVudFRpbWUgKHRpbWU6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBpZiAodGltZSA8PSB0aGlzLmF1ZGlvLmR1cmF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmF1ZGlvLmN1cnJlbnRUaW1lID0gdGltZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDdXJyZW50VGltZSAoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXVkaW8gPyB0aGlzLmF1ZGlvLmN1cnJlbnRUaW1lIDogbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2hhbmdlQXVkaW8oYXVkaW9Vcmw6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAoYXVkaW9VcmwgIT09IHRoaXMuYXVkaW8uY3VycmVudFNyYykge1xuICAgICAgICAgICAgdGhpcy5hdWRpby5zcmMgPSBhdWRpb1VybDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZGVjbGFyZSB2YXIgd2luZG93OiBhbnk7XG53aW5kb3cuU3dhdmUgPSBTd2F2ZTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbmZpZyB7XG4gICAgcHVibGljIHNob3dDb250cm9sczogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHB1YmxpYyBhdXRvUGxheTogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHB1YmxpYyBhdWRpb1VybDogc3RyaW5nID0gJyc7XG4gICAgcHVibGljIGNyb3NzT3JpZ2luOiBzdHJpbmcgPSAnYW5vbnltb3VzJztcblxuICAgIGNvbnN0cnVjdG9yIChmcm9tT2JqOiBhbnkpIHtcbiAgICAgICAgZm9yIChsZXQgcHJvcGVydHkgaW4gZnJvbU9iaikge1xuICAgICAgICAgICAgZm9yKGxldCBvd25Qcm9wZXJ0eSBpbiB0aGlzKSB7XG4gICAgICAgICAgICAgICAgaWYocHJvcGVydHkgPT09IG93blByb3BlcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbb3duUHJvcGVydHldID0gZnJvbU9ialtwcm9wZXJ0eV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IENhbnZhcyBmcm9tIFwiLi9jYW52YXNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmlzdWFsaXplciBleHRlbmRzIENhbnZhcyB7XG5cbiAgICBjb25zdHJ1Y3RvciAoaG9zdEVsZW1lbnQ6IEhUTUxFbGVtZW50LCBwcml2YXRlIGFuYWx5c2VyTm9kZTogQW5hbHlzZXJOb2RlKSB7XG4gICAgICAgIHN1cGVyKGhvc3RFbGVtZW50KTtcbiAgICAgICAgdGhpcy5hbmltYXRlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGFuaW1hdGUoKSB7XG4gICAgICAgIGNvbnN0IFdJRFRIID0gdGhpcy5jYW52YXMuY2xpZW50V2lkdGg7XG4gICAgICAgIGNvbnN0IEhFSUdIVCA9IHRoaXMuY2FudmFzLmNsaWVudEhlaWdodDtcbiAgICAgICAgdGhpcy5hbmFseXNlck5vZGUuZmZ0U2l6ZSA9IDI1NjtcbiAgICAgICAgbGV0IGJ1ZmZlckxlbmd0aEFsdCA9IHRoaXMuYW5hbHlzZXJOb2RlLmZyZXF1ZW5jeUJpbkNvdW50O1xuICAgICAgICBsZXQgZGF0YUFycmF5QWx0ID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyTGVuZ3RoQWx0KTtcblxuICAgICAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgV0lEVEgsIEhFSUdIVCk7XG4gICAgICAgIGxldCBkcmF3ID0gKCkgPT4ge1xuICAgICAgICAgICAgbGV0IGRyYXdWaXN1YWwgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZHJhdyk7XG4gICAgICAgICAgICB0aGlzLmFuYWx5c2VyTm9kZS5nZXRCeXRlRnJlcXVlbmN5RGF0YShkYXRhQXJyYXlBbHQpO1xuXG4gICAgICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSAncmdiKDI1NSwgMjU1LCAyNTUpJztcbiAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KDAsIDAsIFdJRFRILCBIRUlHSFQpO1xuXG4gICAgICAgICAgICBsZXQgYmFyV2lkdGggPSAoV0lEVEggLyBidWZmZXJMZW5ndGhBbHQpICogMi41O1xuICAgICAgICAgICAgbGV0IGJhckhlaWdodDtcbiAgICAgICAgICAgIGxldCB4ID0gMDtcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWZmZXJMZW5ndGhBbHQ7IGkrKykge1xuICAgICAgICAgICAgICAgIGJhckhlaWdodCA9IGRhdGFBcnJheUFsdFtpXTtcblxuICAgICAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9ICdyZ2IoJyArIChiYXJIZWlnaHQgKyAxMDApICsgJywxNSwxNTYpJztcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCh4LCBIRUlHSFQgLSBiYXJIZWlnaHQgLyAyLCBiYXJXaWR0aCwgYmFySGVpZ2h0IC8gMik7XG5cbiAgICAgICAgICAgICAgICB4ICs9IGJhcldpZHRoICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkcmF3KCk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZVZpc3VhbGl6YXRpb25zICgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95Q2FudmFzKCk7XG4gICAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbnZhcyB7XG4gICAgcHJvdGVjdGVkIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuICAgIHByb3RlY3RlZCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IgKHByaXZhdGUgaG9zdEVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIGhvc3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY2FudmFzKTtcbiAgICAgICAgdGhpcy5jYW52YXMuaWQgPSAnc3dhdmUtY2FudmFzJztcbiAgICAgICAgdGhpcy5jYW52YXMud2lkdGggPSBob3N0RWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0PSBob3N0RWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gICAgICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGVzdHJveUNhbnZhcyAoKSB7XG4gICAgICAgIHRoaXMuaG9zdEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5jYW52YXMpO1xuICAgIH1cbn0iXSwic291cmNlUm9vdCI6IiJ9